(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3711ca68"],{"218c":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("mu-dialog",{attrs:{"overlay-close":!1,width:"360",open:e.open},on:{"update:open":function(t){e.open=t}}},[i("lottie",{attrs:{options:e.options},on:{animCreated:e.handleAnimation}})],1)},n=[],o=i("8c2c"),a={name:"AnimatorDialog",components:{Lottie:o["a"]},methods:{handleAnimation:function(e){var t=this;e.addEventListener("complete",function(){t.$emit("update:open",t.options.loop),t.$emit("animationPlayComplete")})}},props:{options:{type:Object,required:!0},open:{type:Boolean,default:!1}}},s=a,l=i("0c7c"),u=Object(l["a"])(s,r,n,!1,null,null,null);u.options.__file="AnimatorDialog.vue";t["a"]=u.exports},a9e3:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("container-view",[i("appbar",{attrs:{slot:"appbar",title:"注册",showBack:!0},slot:"appbar"}),i("mu-container",{staticClass:"register"},[i("mu-form",{ref:"registerForm",attrs:{model:e.registerForm}},[i("mu-form-item",{attrs:{"label-float":"",icon:"phone_iphone",rules:e.usernameRules,prop:"mobile",label:"手机号"}},[i("mu-text-field",{model:{value:e.registerForm.mobile,callback:function(t){e.$set(e.registerForm,"mobile",t)},expression:"registerForm.mobile"}})],1),i("mu-form-item",{attrs:{label:"密码",icon:"locked","label-float":"",prop:"password",rules:e.passwordRules}},[i("mu-text-field",{attrs:{"action-icon":e.visibilityPwd?"visibility_off":"visibility","action-click":function(){return e.visibilityPwd=!e.visibilityPwd},type:e.visibilityPwd?"text":"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),i("mu-form-item",{attrs:{label:"确认密码",icon:"locked","label-float":"",prop:"confirmPwd",rules:e.confirmPwdRules}},[i("mu-text-field",{attrs:{"action-icon":e.visibilityPwd?"visibility_off":"visibility","action-click":function(){return e.visibilityPwd=!e.visibilityPwd},type:e.visibilityPwd?"text":"password"},model:{value:e.registerForm.confirmPwd,callback:function(t){e.$set(e.registerForm,"confirmPwd",t)},expression:"registerForm.confirmPwd"}})],1),i("mu-form-item",{attrs:{label:"验证码",icon:"verified_user","label-float":"",prop:"verifyCode",rules:e.verifyCodeRules}},[i("mu-text-field",{model:{value:e.registerForm.verifyCode,callback:function(t){e.$set(e.registerForm,"verifyCode",t)},expression:"registerForm.verifyCode"}},[i("mu-button",{ref:"sendVerifyCodeBtn",attrs:{disabled:e.btnDisable,color:"info"},on:{click:function(t){e.sendVerifyCode(e.registerForm.mobile)}}},[e._v(e._s(e.btnText)+"\n          ")])],1)],1),i("mu-form-item",{attrs:{"label-position":"right",prop:"userType",rules:e.userTypeRules}},[i("mu-radio",{attrs:{value:"true",label:"服务商"},model:{value:e.registerForm.userType,callback:function(t){e.$set(e.registerForm,"userType",t)},expression:"registerForm.userType"}}),i("mu-radio",{attrs:{value:"false",label:"发布人"},model:{value:e.registerForm.userType,callback:function(t){e.$set(e.registerForm,"userType",t)},expression:"registerForm.userType"}})],1),i("mu-form-item",[i("mu-button",{staticStyle:{width:"30%"},attrs:{round:"",color:"primary"},on:{click:e.register}},[e._v("注册\n        ")])],1)],1),i("animator-dialog",{attrs:{open:e.openDialog,options:{animationData:e.$animationData.successAnimator,loop:!1}},on:{animationPlayComplete:e.animationPlayComplete}})],1)],1)},n=[],o=i("98f3"),a=i("218c"),s=i("b95d"),l=i("e9b9"),u=i("ca00"),c={name:"register",components:{Appbar:s["a"],AnimatorDialog:a["a"],ContainerView:o["a"]},data:function(){return{btnText:"发送验证码",visibilityPwd:!1,usernameRules:[{validate:function(e){return!!e},message:"必须填写手机号"},{validate:function(e){return/^1[345678][0-9]{9}$/.test(e)},message:"请填写正确的手机号"}],passwordRules:[{validate:function(e){return!!e},message:"必须填写密码"},{validate:function(e){return/^[a-zA-Z0-9]{4,10}$/.test(e)},message:"密码不能含有非法字符，长度在4-10之间"}],confirmPwdRules:[{validate:function(e){return!!e},message:"请填写确认密码"},{validate:function(e){return/^[a-zA-Z0-9]{4,10}$/.test(e)},message:"密码不能含有非法字符，长度在4-10之间"},{validate:function(e,t){return e===t.password},message:"两次输入的密码不一致"}],userTypeRules:[{validate:function(e){return!!e},message:"请选择注册的用户类型"}],verifyCodeRules:[{validate:function(e){return!!e},message:"请填写验证码"}],registerForm:{password:"",mobile:"",confirmPwd:"",userType:"",verifyCode:""},openDialog:!1,btnDisable:!1}},methods:{sendVerifyFn:function(e){return this.$api.apiUser.sendVerifyCode(e)},toast:function(e){return this.$toast.error(e),l["a"].empty()},alert:function(e){return this.$alert(e,"提示"),l["a"].empty()},enableBtn:function(){this.btnDisable=!1,this.btnText="发送验证码"},startCountDown:function(e){return l["a"].timer(0,1e3).timeInterval().take(e)},sendVerifyCode:function(e){var t=this;l["a"].of(u["a"].isPoneAvailable(e)).do(function(){return t.btnDisable=!0}).flatMap(function(i){return i?t.sendVerifyFn(e):t.toast("请填写正确的手机号")}).flatMap(function(e){return 0===e.code?t.startCountDown(60):t.alert(e.msg)}).map(function(e){return"".concat(59-e.value,"秒后获取")}).subscribe({next:function(e){return t.btnText=e},error:function(e){return t.alert(e.message)&&t.enableBtn()},complete:function(){return t.enableBtn()}})},animationPlayComplete:function(){this.$router.back()},register:function(){var e=this;this.$refs.registerForm.validate().then(function(t){console.log("form valid: ",t),t&&(e.openDialog=!0)})}}},m=c,d=(i("f72c"),i("0c7c")),f=Object(d["a"])(m,r,n,!1,null,"d9d4a704",null);f.options.__file="Register.vue";t["default"]=f.exports},c08b:function(e,t,i){},ca00:function(e,t,i){"use strict";t["a"]={checkUser:function(e){var t=e.$store.getters.get_userInfo;return!(""===t||void 0===t||null===t)},isPoneAvailable:function(e){return/^1[345678][0-9]{9}$/.test(e)},validateIdCard:function(e){var t=/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;if(!t.test(e))return!1;if(18===e.length){for(var i=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,10,9,8,7,6,5,4,3,2],n=0,o=0;o<17;o++)n+=e.substring(o,o+1)*i[o];var a=n%11,s=e.substring(17);return 2===a?"X"===s||"x"===s:parseInt(s)===r[a]}}}},f72c:function(e,t,i){"use strict";var r=i("c08b"),n=i.n(r);n.a}}]);